import { {{~title~}} } from '{{resourceFile}}';
import {AxiosInstance, AxiosRequestConfig} from "axios";
import {ApiPlatformPagedCollection, ApiPlatformIdentifier} from '../utils/utils';

export class {{title}}Service {

  static readonly RESOURCE_NAME = '{{name}}';

  constructor(
    protected http: AxiosInstance
  ) {
  }

  getCollection<T = {{title}}>(config?: AxiosRequestConfig) {
    return this.http.get<ApiPlatformPagedCollection<T>>(`${ {{~title~}}Service.buildIri()}`,config);
  }

  addItem<T = {{title}}>(item: {{title}}) {
    return this.http.post<T>(`${ {{~title~}}Service.buildIri()}`, item);
  }

  getItem<T = {{title}}>(id: ApiPlatformIdentifier,config?: AxiosRequestConfig) {
    return this.http.get<T>(`${ {{~title~}}Service.buildIri(id)}`,config);
  }

  updateItem<T = {{title}}>(item: {{title}}) {
    return this.http.put<T>(`${ {{~title~}}Service.buildIri(item)}`, item);
  }

  deleteItem(id: ApiPlatformIdentifier) {
    return this.http.delete(`${ {{~title~}}Service.buildIri(id)}`);
  }

  static buildIri(id?: ApiPlatformIdentifier): string {
    if (id && id.id) {
      return `/api/${ {{~title~}}Service.RESOURCE_NAME}/${id.id}`;
    } else if (id && id['@id']) {
      return `${id['@id']}`;
    } else {
      return `/api/${ {{~title~}}Service.RESOURCE_NAME}`;
    }
  }

}

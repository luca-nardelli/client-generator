import { {{name}} } from "{{resourceFile}}";
import { HttpClient } from "@angular/common/http";
import { APIPlatformPagedCollection } from "../utils/utils";
import { Inject, Injectable} from '@angular/core';

@Injectable()
export class {{name}}Service {

  constructor(
    protected http: HttpClient,
    @Inject('BASE_API_URL') protected baseUrl: string
  ) {
  }

  getCollection(){
    return this.http.get<{{name}}>(`${this.baseUrl}/api/{{pluralize (toLowerCase (camelCaseToSnakeCase name))}}`);
  }

  addItem(item: {{name}}){
    return this.http.post<{{name}}>(`${this.baseUrl}/api/{{pluralize (toLowerCase (camelCaseToSnakeCase name))}}`, item);
  }

  getItem(id: string){
    return this.http.get<{{name}}>(`${this.baseUrl}/api/{{pluralize (toLowerCase (camelCaseToSnakeCase name))}}/${id}`);
  }

  updateItem(item: {{name}}) {
    if (item['@id']) {
      return this.http.put<{{name}}>(`${this.baseUrl}${item['@id']}`, item);
    }
    return this.http.put<{{name}}>(`${this.baseUrl}/api/{{pluralize (toLowerCase (camelCaseToSnakeCase name))}}/${item.id}`, item);
  }

  deleteItem(id: string){
    return this.http.delete<{}>(`${this.baseUrl}/api/{{pluralize (toLowerCase (camelCaseToSnakeCase name))}}/${id}`);
  }
}
